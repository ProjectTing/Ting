# Ting 앱 단위 테스트 시나리오

## 1. PostService 테스트

### 1.1 게시글 업로드 테스트
- [ ] 정상적인 게시글 데이터로 업로드 성공
- [ ] 필수 필드 누락 시 업로드 실패
- [ ] 제목 최대 길이(20자) 제한 검증
- [ ] 태그 배열 데이터 처리
- [ ] 검색 키워드 자동 생성 검증
- [ ] 빈 문자열 입력 처리
- [ ] 공백만 있는 입력 처리
- [ ] 특수문자 포함된 입력 처리
- [ ] 날짜 형식 검증
- [ ] 업로드 실패 시 에러 처리

### 1.2 게시글 조회 테스트
- [ ] 최근 게시글 3개 조회 정확성
- [ ] 페이징 처리 (20개 단위) 검증
- [ ] lastDocument 기반 페이징 정확성
- [ ] 포지션 필터링 정확도
- [ ] 게시글 타입별 필터링
- [ ] 빈 결과 처리
- [ ] 정렬 순서 정확성
- [ ] 데이터 일관성 검증
- [ ] 누락된 필드 처리
- [ ] 네트워크 오류 처리

### 1.3 게시글 수정/삭제 테스트
- [ ] 정상적인 수정 처리
- [ ] 권한 검증
- [ ] 일부 필드만 수정
- [ ] 삭제 후 조회 불가 확인
- [ ] 잘못된 ID로 수정 시도
- [ ] 동시 수정 요청 처리
- [ ] 수정 이력 추적
- [ ] 연관 데이터 업데이트
- [ ] 롤백 처리
- [ ] 캐시 데이터 정리

## 2. 인증 및 회원 관리 테스트

### 2.1 인증 테스트
- [ ] 회원 로그인 처리
- [ ] 비회원 로그인 처리
- [ ] 로그인 상태 유지
- [ ] 로그아웃 처리
- [ ] 자동 로그인
- [ ] 세션 만료 처리
- [ ] 접근 권한 검증
- [ ] 비회원의 제한된 기능 접근
- [ ] 인증 토큰 관리
- [ ] 로그인 상태 변경 이벤트

### 2.2 회원 탈퇴 테스트

#### 2.2.1 탈퇴 프로세스 테스트
- [ ] 약관 동의 체크 검증
- [ ] Apple 재인증 성공/실패 처리
- [ ] Firebase Auth 계정 삭제
- [ ] UserDefaults 데이터 정리
- [ ] 탈퇴 완료 후 SignUpVC로 화면 전환
- [ ] 탈퇴 중 앱 종료 시나리오
- [ ] 탈퇴 후 재로그인 시도 차단
- [ ] 탈퇴 취소 프로세스
- [ ] 탈퇴 실패 시 사용자 피드백
- [ ] 탈퇴 완료 확인

#### 2.2.2 연관 데이터 삭제 테스트
- [ ] users 컬렉션에서 사용자 문서 삭제
- [ ] infos 컬렉션에서 사용자 정보 삭제
- [ ] 작성한 게시글 일괄 삭제 (posts)
- [ ] 작성한 신고 내역 처리 (reports)
- [ ] 피신고 내역 처리
- [ ] Batch 작업 성공 여부 확인
- [ ] 부분 삭제 실패 시 롤백 처리
- [ ] 삭제된 데이터 복구 불가능 확인
- [ ] 대용량 데이터 삭제 성능
- [ ] 삭제 진행률 표시

#### 2.2.3 데이터 정합성 테스트
- [ ] 모든 컬렉션에서 사용자 데이터 완전 삭제 확인
- [ ] 삭제된 게시글 접근 시도
- [ ] 삭제된 신고 내역 접근 시도
- [ ] Firebase Auth와 Firestore 데이터 동기화
- [ ] 연관된 모든 문서 참조 정리
- [ ] 캐시 데이터 정리
- [ ] 로컬 저장소 정리
- [ ] 부분 실패 시 일관성 유지
- [ ] 동시 요청 처리
- [ ] 네트워크 오류 복구

## 3. UserInfoService 테스트

### 2.1 회원정보 생성 테스트
- [ ] 필수 정보 검증
- [ ] 닉네임 중복 체크
- [ ] userId 유효성 검사
- [ ] 데이터 형식 검증
- [ ] 공백 처리
- [ ] 특수문자 처리
- [ ] 최대 길이 제한
- [ ] 생성 시간 기록
- [ ] 초기 설정값 검증
- [ ] 에러 메시지 정확성

### 3.2 회원정보 수정 테스트
- [ ] 기본 정보 수정 성공
- [ ] 닉네임 변경 처리
- [ ] posts 컬렉션 닉네임 업데이트
- [ ] reports 컬렉션 닉네임 업데이트 (신고자/피신고자)
- [ ] infos 컬렉션 닉네임 업데이트
- [ ] 일괄 업데이트 트랜잭션
- [ ] 부분 업데이트 실패 시 롤백
- [ ] 동시 수정 요청 처리
- [ ] 수정 권한 검증
- [ ] 변경 이력 추적

### 3.3 회원정보 조회 테스트
- [ ] UserDefaults 데이터 검증
- [ ] 캐시 데이터 관리
- [ ] 존재하지 않는 정보 조회
- [ ] 권한 체크
- [ ] 데이터 일관성
- [ ] 조회 성능
- [ ] 동시 요청 처리
- [ ] 오프라인 동작
- [ ] 세션 관리
- [ ] 에러 복구

## 3. UI 컴포넌트 테스트

### 3.1 CustomTag 테스트
- [ ] 태그 선택/해제 상태
- [ ] 다중 선택 처리
- [ ] 스타일 변경 검증
- [ ] 탭 이벤트 처리
- [ ] 레이아웃 정확성
- [ ] 비활성화 상태
- [ ] 애니메이션 동작
- [ ] 텍스트 오버플로우
- [ ] 접근성 지원
- [ ] 메모리 누수 검사

### 3.2 TagFlowLayout 테스트
- [ ] 태그 추가/제거
- [ ] 레이아웃 계산
- [ ] 동적 크기 조정
- [ ] 여백 처리
- [ ] 스크롤 동작
- [ ] 터치 이벤트
- [ ] 재사용 처리
- [ ] 성능 측정
- [ ] 메모리 사용량
- [ ] 레이아웃 업데이트

## 4. 화면 전환 및 데이터 전달 테스트

### 4.1 화면 전환 테스트
- [ ] 게시글 작성 화면 전환
- [ ] 상세 화면 전환
- [ ] 뒤로가기 처리
- [ ] 모달 표시
- [ ] 네비게이션 스택
- [ ] 데이터 전달
- [ ] 메모리 해제
- [ ] 상태 저장
- [ ] Deep Link 처리
- [ ] 전환 애니메이션

### 4.2 데이터 전달 테스트
- [ ] Delegate 패턴 동작
- [ ] Protocol 구현
- [ ] 약한 참조 처리
- [ ] 옵셔널 체이닝
- [ ] 순환 참조 방지
- [ ] 데이터 동기화
- [ ] 이벤트 전파
- [ ] 상태 관리
- [ ] 메모리 관리
- [ ] 에러 전파

## 5. 입력 검증 테스트

### 5.1 텍스트 입력 테스트
- [ ] 최대 길이 제한
- [ ] 공백 처리
- [ ] 특수문자 처리
- [ ] 포맷팅 검증
- [ ] 실시간 유효성 검사
- [ ] 키보드 처리
- [ ] 포커스 관리
- [ ] 자동완성
- [ ] 복사/붙여넣기
- [ ] 실행 취소

### 5.2 선택 입력 테스트
- [ ] 단일 선택 처리
- [ ] 다중 선택 처리
- [ ] 선택 해제
- [ ] 필수 선택 검증
- [ ] 상태 변경 이벤트
- [ ] 시각적 피드백
- [ ] 선택 제한
- [ ] 그룹 선택


## 6. 신고 기능 테스트

### 6.1 신고 생성 테스트
- [ ] 정상적인 신고 생성
- [ ] 신고 사유 선택 필수
- [ ] 신고 내용 필수 입력
- [ ] 중복 신고 방지
- [ ] 자기 자신 신고 불가
- [ ] 비회원 신고 불가
- [ ] 삭제된 게시글 신고
- [ ] 신고자/피신고자 정보 저장
- [ ] 신고 시간 기록
- [ ] 신고 상태 관리

### 6.2 신고 관리 테스트
- [ ] 신고 목록 조회
- [ ] 신고 상세 정보 조회
- [ ] 신고 처리 상태 변경
- [ ] 신고 이력 관리
- [ ] 신고 통계 집계
- [ ] 게시글별 신고 수 집계
- [ ] 사용자별 신고 수 집계
- [ ] 신고 데이터 정합성
- [ ] 관리자 권한 검증
- [ ] 신고 처리 알림

## 7. 에러 처리 테스트

### 6.1 네트워크 에러
- [ ] 연결 끊김 처리
- [ ] 타임아웃 처리
- [ ] 재시도 메커니즘
- [ ] 오프라인 모드
- [ ] 에러 메시지
- [ ] 상태 복구
- [ ] 캐시 활용
- [ ] 백그라운드 처리
- [ ] 데이터 동기화
- [ ] 사용자 피드백

### 6.2 입력 에러
- [ ] 필수 필드 검증
- [ ] 형식 검증
- [ ] 중복 검증
- [ ] 범위 검증
- [ ] 유효성 검사
- [ ] 에러 표시
- [ ] 포커스 처리
- [ ] 오류 수정 안내
- [ ] 입력 제한


## 테스트 환경 설정

### 필요한 의존성
- XCTest 프레임워크
- Firebase Test Lab
- SnapKit
- Then

### 테스트 전제조건
1. Firebase 에뮬레이터 설정
2. 테스트용 데이터베이스 구성
3. 테스트 계정 준비
4. UI 테스트를 위한 화면 캡처 도구

### 우선순위 기능
1. 게시글 CRUD 및 권한 관리
2. 회원정보 관리
3. UI 인터랙션
4. 데이터 정합성

## 테스트 실행 가이드

1. 단위 테스트는 독립적으로 실행 가능해야 함
2. UI 테스트는 실제 디바이스에서 진행
3. 테스트 데이터는 매 테스트마다 초기화
4. 성능 측정이 필요한 경우 별도 표시
